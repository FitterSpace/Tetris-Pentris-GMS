<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>GamePadLeft = true
GamePadRight = true
GamePadDown = true
GamePadUp = true
AHeld = true
BHeld = true
StartHeld = true

gamepad = 0
gamepad_set_axis_deadzone(4,0.7)


menu_x = room_width/2
menu_y = room_height/4
button_h = 48

// buttons
button[0] = "Tetris A-Type"
button[1] = "Tetris B-Type"
button[2] = "Tetris Variety A-Type"
button[3] = "Tetris Variety B-Type"
button[4] = "Pentris A-Type"
button[5] = "Pentris B-Type"
button[6] = "Pentris Variety A-Type"
button[7] = "Pentris Variety B-Type"
buttons = array_length_1d(button)

menu_index = 0
last_selected = 0


global.GameSelection = 0
global.music = 0
global.B_TYPE_HEIGHT = 0
global.B_TYPE_SELECTION = 0
global.StartLevel = 0
global.Time = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (gamepad_axis_value(4,gp_axislh) &gt;= 0) {GamePadLeft = false}  // left
if (gamepad_axis_value(4,gp_axislh) &lt;= 0) {GamePadRight = false} // right
if (gamepad_axis_value(4,gp_axislv) &lt;= 0) {GamePadDown = false}  // down
if (gamepad_axis_value(4,gp_axislv) &gt;= 0) {GamePadUp = false}  // up
if !gamepad_button_check(4,gp_face1) {AHeld = false} // a
if !gamepad_button_check(4,gp_face3) {BHeld = false} // b
if !gamepad_button_check(4,gp_start) {StartHeld = false} // b

// Moving the cursor on the menu (keyboard)
menu_move = keyboard_check_pressed(vk_down) - keyboard_check_pressed(vk_up);

// Moving the cursor on the menu (gamepad)
if (gamepad_axis_value(4,gp_axislv) &gt; 0 // down
and GamePadDown = false) {
    GamePadDown = true
    menu_index += 1
    }  

if (gamepad_axis_value(4,gp_axislv) &lt; 0 // up
and GamePadUp = false) {
    GamePadUp = true
    menu_index -= 1
    }  


// Highlighting different menu options
menu_index += menu_move
if (menu_index &lt; 0) {menu_index = buttons - 1}
if (menu_index &gt; buttons - 1) {menu_index = 0}

if menu_index != last_selected {audio_play_sound(snd_selection,1,false)}

last_selected = menu_index;


// Selecting an option
if keyboard_check_pressed(vk_enter) 
or (gamepad_button_check(4,gp_face1) and AHeld = false)
or (gamepad_button_check(4,gp_start) and StartHeld = false) {
    
    AHeld = true
    StartHeld = true
    
    switch(menu_index) {
        
        case 0: // Tetris A-Type
            room = rm_main2
            global.GameSelection = rm_Tetris_AType
            instance_destroy()
            break;
        case 1: // Tetris B-Type
            room = rm_main2
            global.GameSelection = rm_Tetris_BType
            instance_destroy()
            break;
        case 2: // Tetris Variety
            room = rm_main2
            global.GameSelection = rm_Tetris_Variety
            instance_destroy()
            break;
        case 3: // Tetris Variety B-Type
            room = rm_main2
            global.GameSelection = rm_Tetris_Variety_BType
            instance_destroy()
            break;
        case 4: // Pentris A-Type
            room = rm_main2
            global.GameSelection = rm_Pentris_AType
            instance_destroy()
            break;
        case 5: // Pentris B-Type
            room = rm_main2
            global.GameSelection = rm_Pentris_BType
            instance_destroy()
            break;
        case 6: // Pentris Variety
            room = rm_main2
            global.GameSelection = rm_Pentris_Variety
            instance_destroy()
            break;
        case 7: // Pentris Variety B-Type
            room = rm_main2
            global.GameSelection = rm_Pentris_Variety_BType
            instance_destroy()
            break;
    }
}

/*
if keyboard_check(ord("A")) {
    room = rm_Tetris_AType
    instance_destroy()
}

if keyboard_check(ord("B")) {
    room = rm_Tetris_BType
    instance_destroy()
}

if keyboard_check(ord("P")) {
    room = rm_Pentris_AType
    instance_destroy()
}

if keyboard_check(ord("L")) {
    room = rm_Pentris_BType
    instance_destroy()
} */

if gamepad_button_check(4,gp_face1) {gamepad = 1} // a
else if gamepad_button_check(4,gp_face3) {gamepad = 2} // b
else if gamepad_axis_value(4,gp_axislv) &lt; 0 {gamepad = 3} // up
else if gamepad_axis_value(4,gp_axislv) &gt; 0 {gamepad = 4} // down
else if gamepad_axis_value(4,gp_axislh) &lt; 0 {gamepad = 5} // left
else if gamepad_axis_value(4,gp_axislh) &gt; 0 {gamepad = 6} // right
else if gamepad_button_check(4,gp_start) {gamepad = 7} // start
else {gamepad = 0}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

var i = 0;
repeat (buttons) {
    
    draw_set_font(fnt_score)
    draw_set_halign(fa_center)
    draw_set_valign(fa_middle)
    draw_set_color(c_white)

    if (menu_index == i) draw_set_color(c_red);
    
    draw_text(menu_x, menu_y + button_h * i, button[i]);
    i++;
}




//draw_text(room_width/2,(room_height/3)-48,"Press A for A-Type")
//draw_text(room_width/2,(room_height/3),"Press B for B-Type")
//draw_text(room_width/2,(room_height/3)+64,"Press P for Pentris")
//draw_text(room_width/2,(room_height/3)+112,"Press L for Pentris B-Type")

if gamepad = 1 {draw_text(room_width/2,room_height-128,"A")}
if gamepad = 2 {draw_text(room_width/2,room_height-128,"B")}
if gamepad = 3 {draw_text(room_width/2,room_height-128,"Up")}
if gamepad = 4 {draw_text(room_width/2,room_height-128,"Down")}
if gamepad = 5 {draw_text(room_width/2,room_height-128,"Left")}
if gamepad = 6 {draw_text(room_width/2,room_height-128,"Right")}
if gamepad = 7 {draw_text(room_width/2,room_height-128,"Start")}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
